<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pixelify+Sans&family=Poppins&family=Silkscreen&display=swap');
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        .header{
            #brand-title h2{
                display: flex;
                align-items: center;
            }
            .navbar{
                padding: 0 10px;
                margin: 0;
                display: flex;
                justify-content: space-between;
                width: 100%;
                background: #fff;
                position: fixed;
                flex: 1;
                z-index: 1;
            }
            .nav-left{
                margin-right: 10px;
                display: flex;
                justify-content: space-around;
                align-items: center;
            }
            #split-icon{
                padding: 0 10px;
            }
            a{
                text-decoration: none;
                color: #000;
            }
            #back-arrow{
                margin-top: 5px;
                padding: 3px;
                height: 25px;
                width: 25dpx;
            }
            #back-arrow:hover{
                border-radius: 50%;
                background-color: #eaeaea;
            }
        }
        .container{
            margin: 0 20px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .container-heading h3{
            margin-top: 40px;
            margin-bottom: 10px;
            font-size: 24px;
            font-weight: bold;
        }
        a{
            display: flex;
            text-decoration: none;
            color: #000;
        }
        .card-container img {
            width: 250px;
            height: 250px;
            background-color: #e9e9e9;
        }
        .card-content {
            margin-top: 10px;
            width: 100%;
            display: flex;
            align-items: start;
            justify-content: space-between;
            padding: 0 10px;
            
        }

        .card-content h4 {
            color: rgb(88, 88, 88);
        }

        .card-content p {
            text-transform: uppercase;
            font-size: 14px;
            font-weight: 700;
        }
        .card-content img:hover{
            background-color: #cacaca;
        }
        
        .card-details{
            margin: 0;
        }
        .card-details p{
            padding-top: 8px;
            color: grey;
        }
        hr{
            margin: 10px 0;
        }
        /*QUANTITY*/
        .quantity{
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .quantity input{
            margin:0;
            height: 40px;
            width: 70px;
            padding: 0 10px;
            border: 1px solid #9b9b9b;
        }
        .rate button{
            margin-top: 10px;
            padding: 6px 20px;
            border: none;
            background-color: #000;
            color: #fff;
        }
        .clear-btn button{
            padding: 2px 8px;
            border: none;
            float: right;
            position: relative;
            bottom: 25px;
            right: 20px;
        }
    </style>

</head>
<body>
    <div class="header">
        <div class="navbar">
                <img src="./images/left-chevron.png" id="back-arrow"  onclick="backToHome()">
            <div class="nav-right">
                <!--<span><a href="">back</a></span>-->
            </div>
            <h2 id="brand-title">Brand name</h2>
            <div class="nav-left">
                <span id="login"><a href="#">login</a></span>
                <span id="split-icon">|</span>
                <span id="cart"><a href="#">My cart</a></span>
            </div>        
        </div>
    </div>
    <div class="card-container"></div>
    <!--Card
    <div class="container">
        <div class="container-heading">
            <h3>Your Cart</h3>
        </div>
        
        <div class="card-container">
            <div class="card1">
                <a href="">
                    <img src="./images/white shirt1.png" alt="">
                    <div class="card-content">
                        <div class="card-details">
                            <h3>White Shirt</h3>
                            <h4>ZARA</h4>
                            <p>"Unisex shirt: Pure comfort in a timeless design. <br>
                                Soft cotton, classic fit. Your essential wardrobe staple."</p>
                        </div>
                        <div class="quantity">
                            <p>Qty</p>
                            <input type="number" id="qty-number">
                        </div>
                        <div class="rate">
                            <p>700inr</p>
                            <button onclick="buy()">Buy</button>
                        </div>
                    </div>
                </a>
                <div class="clear-btn">
                    <button id="clearBtn" onclick="clearBtn()">X</button>
                </div> 
        </div>
    </div>
    <hr></div>-->
    <script>
        function backToHome(){
            window.location.href = "http://127.0.0.1:5500/ClothingSite/index.html";
        }

        function clearBtn() {
        const cartItem = document.querySelector('.card1'); // Adjust this selector based on your actual cart structure

        if (cartItem) {
            // Remove the selected product from the cart (you may want to update localStorage or server data)
            cartItem.remove();
            alert('Item removed from cart!');
        } else {
            console.log('No item removed');
        }
    }
        // function clearBtn(){
        //     const card1 = document.querySelector('.card1');
        //     const card2 = document.querySelector('.card2');
        //     const card3 = document.querySelector('.card3');
        //     const card4 = document.querySelector('.card4');
        //     if(card1){
        //         card1.remove();
        //     } else if(card2){
        //         card2.remove();
        //     } else if(card3){
        //         card3.remove();
        //     } else if(card4){
        //         console.log("no class deleted");
        //     } else{
        //         console.log("no class deleted");
        //     }
        // }
        


        
        function backToHome() {
            window.location.href = "http://127.0.0.1:5500/ClothingSite/index.html";
        }

        function clearBtn(cartItem) {
            // Remove the selected product from the cart (you may want to update localStorage or server data)
            cartItem.remove();
            alert('Item removed from cart!');
        }

        function renderCart() {
            const cartContainer = document.querySelector('.card-container');
            const cart = JSON.parse(localStorage.getItem('cart')) || [];

            // Clear existing content in the cart container
            cartContainer.innerHTML = '';

            // Iterate over each item in the cart and render it
            cart.forEach((product, index) => {
                const newCard = document.createElement('div');
                newCard.classList.add('card');
                newCard.innerHTML = `
                    <a href="#">
                        <img src="${product.image}" alt="">
                        <div class="card-content">
                            <div class="card-details">
                                <h3>${product.name}</h3>
                                <h4>${product.details}</h4>
                                <p>${product.quantity} in ${product.color}, Size: ${product.size}</p>
                            </div>
                            <div class="quantity">
                                <p>Qty</p>
                                <input type="number" value="${product.quantity}" disabled>
                            </div>
                            <div class="rate">
                                <p>${product.rate}inr</p>
                                <button onclick="buy()">Buy</button>
                            </div>
                        </div>
                    </a>
                    <div class="clear-btn">
                        <button onclick="clearBtn(this)">X</button>
                    </div>
                `;
                cartContainer.appendChild(newCard);
            });
        }

        function addCart() {
            const productImage = document.getElementById('img').src;
            const productName = document.getElementById('content-title').innerText;
            const productDetailsElement = document.getElementById('content-details');
            const productDetails = productDetailsElement ? productDetailsElement.innerText : '';

            const selectedCircle = document.querySelector('.colors .circle:hover');
            const productColor = selectedCircle ? selectedCircle.style.backgroundColor : '';

            const productQuantityElement = document.getElementById('quantity');
            const productQuantity = productQuantityElement ? productQuantityElement.value : '';

            const selectedSize = document.querySelector('.size #size-child:hover');
            const productSize = selectedSize ? selectedSize.innerText : '';

            const productRate = 699; // Assuming a fixed rate for now

            const product = {
                image: productImage,
                name: productName,
                details: productDetails,
                color: productColor,
                quantity: productQuantity,
                size: productSize,
                rate: productRate
            };

            // Retrieve the existing cart from local storage or create a new one
            const cart = JSON.parse(localStorage.getItem('cart')) || [];

            // Check if the product is already in the cart
            const existingProductIndex = cart.findIndex(item => (
                item.name === product.name &&
                item.color === product.color &&
                item.size === product.size
            ));

            if (existingProductIndex !== -1) {
                // Product already exists in the cart, update quantity
                cart[existingProductIndex].quantity += parseInt(product.quantity, 10);
            } else {
                // Product is not in the cart, add it
                cart.push(product);
            }

            // Save the updated cart back to local storage
            localStorage.setItem('cart', JSON.stringify(cart));

            // Optional: Display the updated cart on the page
            renderCart();

            alert('Item added to cart!');
        }

        // Render cart function as provided in the previous response

        // Optional: Call renderCart when the page loads to display existing cart items
        window.onload = renderCart;

    </script>
</body>
</html>